# Включение NGINX Ingress Controller
nginxIngress:
  enabled: true
  controller:
    service:
      type: LoadBalancer
      nodePorts:
        http: 30080
        https: 30443
    replicaCount: 1
    nodeSelector:
      kubernetes.io/os: linux
    tolerations:
      - key: "node-role.kubernetes.io/control-plane"
        operator: "Exists"
        effect: "NoSchedule"
    ingressClassResource:
      name: nginx
      enabled: true
      default: true     # ← делает IngressClass/nginx дефолтным

# Параметры приложения
app:
  replicaCount: 1
  image: dykastys/test_kuber:latest
  containerPort: 8090

# Параметры сервиса
service:
  port: 80
  targetPort: 8090

# Ingress для приложения
ingress:
  enabled: true
  host: testkuber
  pathType: ImplementationSpecific
  annotations:
    nginx.ingress.kubernetes.io/rewrite-target: /$1

# PostgreSQL
postgres:
  enabled: true
  image: postgres:14
  port: 5432
  persistence:
    enabled: true

  # Настройки StorageClass
  storageClassCreate: true              # ← создаёт ли чарт StorageClass
  storageClassDefault: false            # ← сделать ли его default StorageClass
  storageClassName: postgres-sc         # ← имя создаваемого StorageClass
  provisioner: k8s.io/minikube-hostpath # ← провайдер для миникуба. На проде или в облаке используем необходимый.
  volumeBindingMode: Immediate          # ← привязка PV при создании PVC
  allowVolumeExpansion: true

  # Используем новый StorageClass
  storageClass: postgres-sc
  storage: 1Gi

# База данных
db:
  name: test_kuber_prod